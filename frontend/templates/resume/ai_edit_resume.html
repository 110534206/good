<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ™ºæ…§å¯¦ç¿’å¹³å° | AI å±¥æ­·ä¿®æ”¹å¹³å°</title>
  <style>
   :root {
            --primary-blue: #0069ff;
            --light-gray-border: #e0e0e0;
            --bg-color: #f9f9f9;
            --container-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; 
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            color: #333;
        }

        .ai-container {
            width: 100%;
            max-width: 800px;
            background-color: #ffffff;
            border-radius: 24px;
            padding: 32px;
            box-shadow: var(--container-shadow);
            border: 1px solid var(--light-gray-border);
        }

        h1 {
            text-align: center;
            color: #111;
            margin-top: 0;
            margin-bottom: 30px;
        }

        textarea { 
            width: 100%; 
            height: 200px; 
            margin-bottom: 10px; 
            padding: 15px; 
            box-sizing: border-box; 
            border: 1px solid var(--light-gray-border);
            border-radius: 12px;
            resize: vertical; 
            font-size: 16px;
            line-height: 1.6;
            background-color: #fafafa;
        }
        textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0,105,255,0.1);
        }

        /* ğŸŒŸ [æ–°æ¨£å¼] ç¯©é¸å™¨å®¹å™¨ (è®“è—¥ä¸¸ä¸¦æ’) */
        .filter-container {
            display: flex;
            flex-wrap: wrap; /* åœ¨å°è¢å¹•ä¸Šæ›è¡Œ */
            gap: 10px; /* è—¥ä¸¸ä¹‹é–“çš„é–“è· */
            margin-bottom: 20px;
        }

        /* ğŸŒŸ [æ–°æ¨£å¼] æ¨¡ä»¿ Canva çš„ã€Œè—¥ä¸¸ã€ä¸‹æ‹‰é¸å–® */
        .filter-pill {
            flex-grow: 1; /* è®“å®ƒå€‘å¹³å‡åˆ†é…å¯¬åº¦ */
            min-width: 180px; /* æœ€å°å¯¬åº¦ */
            padding: 10px 15px;
            padding-right: 40px; /* ç‚ºç®­é ­é¨°å‡ºç©ºé–“ */
            font-size: 14px;
            font-weight: 500;
            color: #333;
            border: 1px solid var(--light-gray-border);
            border-radius: 20px; /* è—¥ä¸¸çš„åœ“è§’ */
            background-color: #f5f5f5; /* è—¥ä¸¸èƒŒæ™¯è‰² */
            appearance: none; /* ç§»é™¤ç€è¦½å™¨é è¨­ç®­é ­ */
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23666%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-13%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2013l128%20128c3.6%203.6%207.8%205.4%2013%205.4s9.4-1.8%2013-5.4l128-128c3.6-3.6%205.4-7.8%205.4-13%200-5-1.8-9.4-5.4-13z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 15px top 50%;
            background-size: 10px auto;
            cursor: pointer;
        }
        .filter-pill:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        button { 
            width: 100%; 
            padding: 14px 25px; 
            cursor: pointer; 
            background: linear-gradient(90deg, #007BFF, var(--primary-blue));
            color: white; 
            border: none; 
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        button:hover {
            opacity: 0.9;
            box-shadow: 0 4px 8px rgba(0,105,255,0.2);
        }

        .section-title { 
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em; 
            font-weight: 600;
            color: #555;
        }
        
        #revisedResume { 
            white-space: pre-wrap; 
            background-color: #f5f5f5;
            padding: 15px; 
            border: 1px solid #e0e0e0; 
            min-height: 100px; 
            margin-top: 10px;
            border-radius: 12px;
            line-height: 1.7;
        }
        
        .loader {
            border: 4px solid #f3f3f3; 
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto; 
            display: none; 
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <div class="ai-container">
        <h1>ğŸ“ AI å±¥æ­·ä¿®æ”¹æœå‹™</h1>

        <div class="section-title">è¼¸å…¥æ‚¨çš„å±¥æ­·è‰ç¨¿ï¼š</div>
        <textarea id="resumeInput" placeholder="è«‹è²¼ä¸Šæ‚¨çš„å±¥æ­·å…§å®¹..."></textarea>
        
        <div class="section-title">è«‹é¸æ“‡ä¿®æ”¹é¸é …ï¼š</div>
        
        <div class="filter-container">
            <select id="editStyle" class="filter-pill">
                <option value="polish">ä»»å‹™ï¼šå±¥æ­·ç¾åŒ–</option>
                <option value="concise">ä»»å‹™ï¼šæ–‡æ¡ˆç²¾ç°¡</option>
                <option value="keyword_focus">ä»»å‹™ï¼šé—œéµå­—å°å‘</option>
            </select>
            
            <select id="toneStyle" class="filter-pill">
                <option value="professional">èªæ°£ï¼šå°ˆæ¥­æ­£å¼</option>
                <option value="friendly">èªæ°£ï¼šè¦ªåˆ‡éš¨å’Œ</option>
                <option value="creative">èªæ°£ï¼šæ´»æ½‘å‰µæ„</option>
            </select>
        </div>
        
        <button onclick="reviseResume()">âš¡ ä½¿ç”¨ AI ä¿®æ”¹å±¥æ­·</button>

        <div class="section-title">ä¿®æ”¹å¾Œçš„å±¥æ­·ï¼š</div>
        
        <div id="loadingSpinner" class="loader"></div>
        
        <div id="revisedResume">AI ä¿®æ”¹å¾Œçš„å…§å®¹å°‡é¡¯ç¤ºåœ¨é€™è£¡...</div>
    </div>

    <script>
        async function reviseResume() {
            const resumeInput = document.getElementById('resumeInput').value;
            const revisedResumeDiv = document.getElementById('revisedResume');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            // ğŸŒŸ [æ–°åŠŸèƒ½] è®€å–å…©å€‹ä¸‹æ‹‰é¸å–®çš„å€¼
            const editStyle = document.getElementById('editStyle').value; 
            const toneStyle = document.getElementById('toneStyle').value; 
            
            if (resumeInput.trim() === "") {
                alert("è«‹å…ˆè²¼ä¸Šæ‚¨çš„å±¥æ­·å…§å®¹ï¼");
                return;
            }

            revisedResumeDiv.innerHTML = "";
            loadingSpinner.style.display = 'block'; 

            try {
                const response = await fetch('http://localhost:3000/api/revise-resume', { 
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    // ğŸŒŸ [æ–°åŠŸèƒ½] å°‡å±¥æ­·å’Œå…©å€‹é¸é …ä¸€èµ·ç™¼é€åˆ°å¾Œç«¯
                    body: JSON.stringify({ 
                        resumeText: resumeInput,
                        style: editStyle,
                        tone: toneStyle 
                    })
                });

                if (!response.body) {
                    throw new Error("ä¼ºæœå™¨æ²’æœ‰è¿”å›å¯è®€å–çš„ä¸²æµã€‚");
                }
                
                const reader = response.body.getReader();
                const decoder = new TextDecoder("utf-8"); 
                let done = false;
                
                while (!done) {
                    const { value, done: readerDone } = await reader.read();
                    done = readerDone;
                    
                    if (value) {
                        const chunk = decoder.decode(value, { stream: true });
                        revisedResumeDiv.innerHTML += chunk;
                    }
                }
                revisedResumeDiv.innerHTML += decoder.decode();

            } catch (error) {
                console.error('é€£ç·šæˆ–è®€å–ä¸²æµéŒ¯èª¤:', error);
                revisedResumeDiv.innerHTML = `é€£ç·šéŒ¯èª¤ï¼šè«‹ç¢ºä¿å¾Œç«¯ä¼ºæœå™¨ (http://localhost:3000) æ­£åœ¨é‹è¡Œã€‚`;
                revisedResumeDiv.style.color = 'red';
            } finally {
                loadingSpinner.style.display = 'none'; 
            }
        }
    </script>

</body>
</html>
