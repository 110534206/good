<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>我的通知</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 2rem; font-family: "Noto Sans TC", sans-serif; }
    h1 { color: #0066cc; margin-bottom: 2rem; }
    .unread { background-color: #e9f3ff; font-weight: bold; }
  </style>
</head>
<body>
  <h1>通知中心</h1>
  <table class="table table-hover">
    <thead>
      <tr><th>標題</th><th>內容</th><th>時間</th><th>操作</th></tr>
    </thead>
    <tbody id="notifTable"></tbody>
  </table>

  <script>
    fetch('/notifications/api/my_notifications')
      .then(res => res.json())
      .then(data => {
        if (!data.success) return alert('載入失敗');
        const tbody = document.getElementById('notifTable');
        tbody.innerHTML = '';
        data.notifications.forEach(n => {
          tbody.innerHTML += `
            <tr class="${n.is_read ? '' : 'unread'}">
              <td>${n.title}</td>
              <td>${n.message}</td>
              <td>${n.created_at}</td>
              <td>${n.link_url ? `<a href="${n.link_url}" class="btn btn-sm btn-primary">前往</a>` : '-'}</td>
            </tr>`;
        });
      });
  </script>
</body>
</html>
