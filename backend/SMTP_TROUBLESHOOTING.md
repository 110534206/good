# SMTP 連線問題排除指南

## 問題：連線超時 (WinError 10060)

### 診斷結果
- ✅ 埠 25 可以連線
- ❌ 埠 587 無法連線（被阻擋）
- ❌ 埠 465 無法連線（被阻擋）

### 解決方案

#### 方案 1：檢查並允許防火牆連線（推薦）

1. **Windows 防火牆設定**
   - 開啟「Windows Defender 防火牆」
   - 點擊「允許應用程式或功能通過防火牆」
   - 找到 Python 並允許「私人」和「公用」網路
   - 或新增規則允許連接埠 587 和 465

2. **公司/學校網路**
   - 如果使用公司或學校網路，可能需要聯絡 IT 管理員
   - 請求開放 SMTP 連接埠 587 和 465

#### 方案 2：使用 Gmail API（推薦，更可靠）

如果 SMTP 連線持續有問題，建議改用 Gmail API：

1. 在 `EMAIL.env` 中設定：
   ```env
   USE_SMTP="false"
   ```

2. 設定 Gmail API：
   - 前往 Google Cloud Console
   - 建立專案並啟用 Gmail API
   - 下載 credentials.json
   - 將檔案放在 `backend/` 目錄

#### 方案 3：使用代理伺服器

如果必須使用 SMTP 且網路環境需要代理：

1. 在 Python 代碼中設定代理（需要修改 `email_service.py`）

#### 方案 4：嘗試不同的 SMTP 埠

雖然測試顯示埠 25 可以連線，但 Gmail 的埠 25 通常：
- 不支援 TLS/STARTTLS
- 可能被 ISP 阻擋
- 不建議使用

### 臨時解決方案

如果急需發送郵件，可以：
1. 使用手機熱點（通常不會阻擋 SMTP）
2. 使用 VPN 連線
3. 切換到不同的網路環境

### 測試連線

執行以下命令測試網路連線：
```bash
python test_smtp_network.py
```

### 聯絡資訊

如果問題持續，請提供：
1. 網路環境（家用/公司/學校）
2. 是否有使用 VPN 或代理
3. 防火牆設定
4. 完整的錯誤訊息

